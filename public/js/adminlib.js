/**
* Bootstrap.js by @fat & @mdo
* plugins: bootstrap-modal.js
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this;if(this.isShown)return;a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();if(!this.isShown)return;var e=this;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.trigger("hide").removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery)

/* https://github.com/straps/jquery-livefilter */
!(function(a){a.fn.livefilter=function(c,d){typeof c=="undefined"&&(c="init"),typeof c=="object"&&(d=c,c="init"),c==="init"?(d=a.extend({},a.fn.livefilter.defaults,d),a(this).data("lf-data",d),a(this).unbind(".livefilter").bind("keyup.livefilter",a.fn.livefilter.onKey(d))):c==="destroy"?(d=a(this).data("lf-data"),a(d.selector).filter("."+d.hiddenClass)[d.showFn](),a(this).unbind(".livefilter")):b("action unknown",c);return a(this)},a.fn.livefilter.onKey=function(c){var d=function(){var d=a(this).val();b("filtering",d),d?a(c.selector).filter(":icontains("+d+")")[c.showFn]().removeClass(c.hiddenClass).end().filter(":not(:icontains("+d+"))")[c.hideFn]().addClass(c.hiddenClass):a(c.selector).removeClass(c.hiddenClass)[c.showFn]()};c.debounce&&(b("debounce active",c.debounce),d=a.fn.livefilter.debounce(d,c.debounce));return d},a.fn.livefilter.debounce=function(a,b){var c;return function(){function f(){a.apply(d,e),c=null}var d=this,e=arguments;c&&clearTimeout(c),c=setTimeout(f,b||100)}},a.expr[":"].icontains=function(a,b,c,d){return(a.textContent||a.innerText||jQuery(a).text()||"").toLowerCase().indexOf(c[3].toLowerCase())>=0};var b=function(){typeof console!="undefined"&&console.log&&console.log(Array.prototype.slice.call(arguments).join(", "))};a.fn.livefilter.defaults={selector:"tbody tr",debounce:500,hiddenClass:"lf-hidden",showFn:"show",hideFn:"hide"}})(jQuery)

/**
 *
 * Date picker
 * Author: Stefan Petre www.eyecon.ro
 *
 * Dual licensed under the MIT and GPL licenses
 *
 */
!(function(a){var b=function(){var b={},c={years:"datepickerViewYears",moths:"datepickerViewMonths",days:"datepickerViewDays"},d={wrapper:'<div class="datepicker"><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>',head:["<td>",'<table cellspacing="0" cellpadding="0">',"<thead>","<tr>",'<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="6" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=week%></span></th>","<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>","<th><span><%=day5%></span></th>","<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">',"<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[0].week%></span></a></th>','<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>','<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[1].week%></span></a></th>','<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>','<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[2].week%></span></a></th>','<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>','<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>','<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[3].week%></span></a></th>','<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>','<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[4].week%></span></a></th>','<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>','<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[5].week%></span></a></th>','<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>','<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>',"</tr>","</tbody>"],months:['<tbody class="<%=className%>">',"<tr>",'<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>',"</tr>","</tbody>"]},e={flat:false,starts:1,prev:"&#9664;",next:"&#9654;",lastSel:false,mode:"single",view:"days",calendars:1,format:"Y-m-d",position:"bottom",eventName:"click",onRender:function(){return{}},onChange:function(){return true},onShow:function(){return true},onBeforeShow:function(){return true},onHide:function(){return true},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:"wk"}},f=function(b){var c=a(b).data("datepicker");var e=a(b);var f=Math.floor(c.calendars/2),g,i,j,k,l=0,m,n,o,p,q,r;e.find("td>table tbody").remove();for(var s=0;s<c.calendars;s++){g=new Date(c.current);g.addMonths(-f+s);r=e.find("table").eq(s+1);switch(r[0].className){case"datepickerViewDays":j=h(g,"B, Y");break;case"datepickerViewMonths":j=g.getFullYear();break;case"datepickerViewYears":j=g.getFullYear()-6+" - "+(g.getFullYear()+5);break}r.find("thead tr:first th:eq(1) span").text(j);j=g.getFullYear()-6;i={data:[],className:"datepickerYears"};for(var t=0;t<12;t++){i.data.push(j+t)}q=tmpl(d.months.join(""),i);g.setDate(1);i={weeks:[],test:10};k=g.getMonth();var j=(g.getDay()-c.starts)%7;g.addDays(-(j+(j<0?7:0)));m=-1;l=0;while(l<42){o=parseInt(l/7,10);p=l%7;if(!i.weeks[o]){m=g.getWeekNumber();i.weeks[o]={week:m,days:[]}}i.weeks[o].days[p]={text:g.getDate(),classname:[]};if(k!=g.getMonth()){i.weeks[o].days[p].classname.push("datepickerNotInMonth")}if(g.getDay()==0){i.weeks[o].days[p].classname.push("datepickerSunday")}if(g.getDay()==6){i.weeks[o].days[p].classname.push("datepickerSaturday")}var u=c.onRender(g);var v=g.valueOf();if(u.selected||c.date==v||a.inArray(v,c.date)>-1||c.mode=="range"&&v>=c.date[0]&&v<=c.date[1]){i.weeks[o].days[p].classname.push("datepickerSelected")}if(u.disabled){i.weeks[o].days[p].classname.push("datepickerDisabled")}if(u.className){i.weeks[o].days[p].classname.push(u.className)}i.weeks[o].days[p].classname=i.weeks[o].days[p].classname.join(" ");l++;g.addDays(1)}q=tmpl(d.days.join(""),i)+q;i={data:c.locale.monthsShort,className:"datepickerMonths"};q=tmpl(d.months.join(""),i)+q;r.append(q)}},g=function(a,b){if(a.constructor==Date){return new Date(a)}var c=a.split(/\W+/);var d=b.split(/\W+/),e,f,g,h,i,j=new Date;for(var k=0;k<c.length;k++){switch(d[k]){case"d":case"e":e=parseInt(c[k],10);break;case"m":f=parseInt(c[k],10)-1;break;case"Y":case"y":g=parseInt(c[k],10);g+=g>100?0:g<29?2e3:1900;break;case"H":case"I":case"k":case"l":h=parseInt(c[k],10);break;case"P":case"p":if(/pm/i.test(c[k])&&h<12){h+=12}else if(/am/i.test(c[k])&&h>=12){h-=12}break;case"M":i=parseInt(c[k],10);break}}return new Date(g===undefined?j.getFullYear():g,f===undefined?j.getMonth():f,e===undefined?j.getDate():e,h===undefined?j.getHours():h,i===undefined?j.getMinutes():i,0)},h=function(a,b){var c=a.getMonth();var d=a.getDate();var e=a.getFullYear();var f=a.getWeekNumber();var g=a.getDay();var h={};var i=a.getHours();var j=i>=12;var k=j?i-12:i;var l=a.getDayOfYear();if(k==0){k=12}var m=a.getMinutes();var n=a.getSeconds();var o=b.split(""),p;for(var q=0;q<o.length;q++){p=o[q];switch(o[q]){case"a":p=a.getDayName();break;case"A":p=a.getDayName(true);break;case"b":p=a.getMonthName();break;case"B":p=a.getMonthName(true);break;case"C":p=1+Math.floor(e/100);break;case"d":p=d<10?"0"+d:d;break;case"e":p=d;break;case"H":p=i<10?"0"+i:i;break;case"I":p=k<10?"0"+k:k;break;case"j":p=l<100?l<10?"00"+l:"0"+l:l;break;case"k":p=i;break;case"l":p=k;break;case"m":p=c<9?"0"+(1+c):1+c;break;case"M":p=m<10?"0"+m:m;break;case"p":case"P":p=j?"PM":"AM";break;case"s":p=Math.floor(a.getTime()/1e3);break;case"S":p=n<10?"0"+n:n;break;case"u":p=g+1;break;case"w":p=g;break;case"y":p=(""+e).substr(2,2);break;case"Y":p=e;break}o[q]=p}return o.join("")},i=function(a){if(Date.prototype.tempDate){return}Date.prototype.tempDate=null;Date.prototype.months=a.months;Date.prototype.monthsShort=a.monthsShort;Date.prototype.days=a.days;Date.prototype.daysShort=a.daysShort;Date.prototype.getMonthName=function(a){return this[a?"months":"monthsShort"][this.getMonth()]};Date.prototype.getDayName=function(a){return this[a?"days":"daysShort"][this.getDay()]};Date.prototype.addDays=function(a){this.setDate(this.getDate()+a);this.tempDate=this.getDate()};Date.prototype.addMonths=function(a){if(this.tempDate==null){this.tempDate=this.getDate()}this.setDate(1);this.setMonth(this.getMonth()+a);this.setDate(Math.min(this.tempDate,this.getMaxDays()))};Date.prototype.addYears=function(a){if(this.tempDate==null){this.tempDate=this.getDate()}this.setDate(1);this.setFullYear(this.getFullYear()+a);this.setDate(Math.min(this.tempDate,this.getMaxDays()))};Date.prototype.getMaxDays=function(){var a=new Date(Date.parse(this)),b=28,c;c=a.getMonth();b=28;while(a.getMonth()==c){b++;a.setDate(b)}return b-1};Date.prototype.getFirstDay=function(){var a=new Date(Date.parse(this));a.setDate(1);return a.getDay()};Date.prototype.getWeekNumber=function(){var a=new Date(this);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var b=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((b-a.valueOf())/6048e5)+1};Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var b=new Date(this.getFullYear(),0,0,0,0,0);var c=a-b;return Math.floor(c/24*60*60*1e3)}},j=function(b){var c=a(b).data("datepicker");var d=a("#"+c.id);var f=d.find("table:first").get(0);var g=f.offsetWidth;var h=f.offsetHeight;d.css({width:g+c.extraWidth+"px",height:h+c.extraHeight+"px"}).find("div.datepickerContainer").css({width:g+"px",height:h+"px"})},k=function(b){if(a(b.target).is("span")){b.target=b.target.parentNode}var c=a(b.target);if(c.is("a")){b.target.blur();if(c.hasClass("datepickerDisabled")){return false}var d=a(this).data("datepicker");var e=c.parent();var g=e.parent().parent().parent();var i=a("table",this).index(g.get(0))-1;var j=new Date(d.current);var k=false;var m=false;if(e.is("th")){if(e.hasClass("datepickerWeek")&&d.mode=="range"&&!e.next().hasClass("datepickerDisabled")){var n=parseInt(e.next().text(),10);j.addMonths(i-Math.floor(d.calendars/2));if(e.next().hasClass("datepickerNotInMonth")){j.addMonths(n>15?-1:1)}j.setDate(n);d.date[0]=j.setHours(0,0,0,0).valueOf();j.setHours(23,59,59,0);j.addDays(6);d.date[1]=j.valueOf();m=true;k=true;d.lastSel=false}else if(e.hasClass("datepickerMonth")){j.addMonths(i-Math.floor(d.calendars/2));switch(g.get(0).className){case"datepickerViewDays":g.get(0).className="datepickerViewMonths";c.find("span").text(j.getFullYear());break;case"datepickerViewMonths":g.get(0).className="datepickerViewYears";c.find("span").text(j.getFullYear()-6+" - "+(j.getFullYear()+5));break;case"datepickerViewYears":g.get(0).className="datepickerViewDays";c.find("span").text(h(j,"B, Y"));break}}else if(e.parent().parent().is("thead")){switch(g.get(0).className){case"datepickerViewDays":d.current.addMonths(e.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewMonths":d.current.addYears(e.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewYears":d.current.addYears(e.hasClass("datepickerGoPrev")?-12:12);break}m=true}}else if(e.is("td")&&!e.hasClass("datepickerDisabled")){switch(g.get(0).className){case"datepickerViewMonths":d.current.setMonth(g.find("tbody.datepickerMonths td").index(e));d.current.setFullYear(parseInt(g.find("thead th.datepickerMonth span").text(),10));d.current.addMonths(Math.floor(d.calendars/2)-i);g.get(0).className="datepickerViewDays";break;case"datepickerViewYears":d.current.setFullYear(parseInt(c.text(),10));g.get(0).className="datepickerViewMonths";break;default:var n=parseInt(c.text(),10);j.addMonths(i-Math.floor(d.calendars/2));if(e.hasClass("datepickerNotInMonth")){j.addMonths(n>15?-1:1)}j.setDate(n);switch(d.mode){case"multiple":n=j.setHours(0,0,0,0).valueOf();if(a.inArray(n,d.date)>-1){a.each(d.date,function(a,b){if(b==n){d.date.splice(a,1);return false}})}else{d.date.push(n)}break;case"range":if(!d.lastSel){d.date[0]=j.setHours(0,0,0,0).valueOf()}n=j.setHours(23,59,59,0).valueOf();if(n<d.date[0]){d.date[1]=d.date[0]+86399e3;d.date[0]=n-86399e3}else{d.date[1]=n}d.lastSel=!d.lastSel;break;default:d.date=j.valueOf();break}break}m=true;k=true}if(m){f(this)}if(k){d.onChange.apply(this,l(d))}}return false},l=function(b){var c;if(b.mode=="single"){c=new Date(b.date);return[h(c,b.format),c,b.el]}else{c=[[],[],b.el];a.each(b.date,function(a,d){var e=new Date(d);c[0].push(h(e,b.format));c[1].push(e)});return c}},m=function(){var a=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(a?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(a?document.documentElement.clientHeight:document.body.clientHeight)}},n=function(a,b,c){if(a==b){return true}if(a.contains){return a.contains(b)}if(a.compareDocumentPosition){return!!(a.compareDocumentPosition(b)&16)}var d=b.parentNode;while(d&&d!=c){if(d==a)return true;d=d.parentNode}return false},o=function(b){var c=a("#"+a(this).data("datepickerId"));if(!c.is(":visible")){var d=c.get(0);f(d);var e=c.data("datepicker");e.onBeforeShow.apply(this,[c.get(0)]);var g=a(this).offset();var h=m();var i=g.top;var k=g.left;var l=a.curCSS(d,"display");c.css({visibility:"hidden",display:"block"});j(d);switch(e.position){case"top":i-=d.offsetHeight;break;case"left":k-=d.offsetWidth;break;case"right":k+=this.offsetWidth;break;case"bottom":i+=this.offsetHeight;break}if(i+d.offsetHeight>h.t+h.h){i=g.top-d.offsetHeight}if(i<h.t){i=g.top+this.offsetHeight+d.offsetHeight}if(k+d.offsetWidth>h.l+h.w){k=g.left-d.offsetWidth}if(k<h.l){k=g.left+this.offsetWidth}c.css({visibility:"visible",display:"block",top:i+"px",left:k+"px"});if(e.onShow.apply(this,[c.get(0)])!=false){c.show()}a(document).bind("mousedown",{cal:c,trigger:this},p)}return false},p=function(b){if(b.target!=b.data.trigger&&!n(b.data.cal.get(0),b.target,b.data.cal.get(0))){if(b.data.cal.data("datepicker").onHide.apply(this,[b.data.cal.get(0)])!=false){b.data.cal.hide()}a(document).unbind("mousedown",p)}};return{init:function(b){b=a.extend({},e,b||{});i(b.locale);b.calendars=Math.max(1,parseInt(b.calendars,10)||1);b.mode=/single|multiple|range/.test(b.mode)?b.mode:"single";return this.each(function(){if(!a(this).data("datepicker")){b.el=this;if(b.date.constructor==String){b.date=g(b.date,b.format);b.date.setHours(0,0,0,0)}if(b.mode!="single"){if(b.date.constructor!=Array){b.date=[b.date.valueOf()];if(b.mode=="range"){b.date.push((new Date(b.date[0])).setHours(23,59,59,0).valueOf())}}else{for(var e=0;e<b.date.length;e++){b.date[e]=g(b.date[e],b.format).setHours(0,0,0,0).valueOf()}if(b.mode=="range"){b.date[1]=(new Date(b.date[1])).setHours(23,59,59,0).valueOf()}}}else{b.date=b.date.valueOf()}if(!b.current){b.current=new Date}else{b.current=g(b.current,b.format)}b.current.setDate(1);b.current.setHours(0,0,0,0);var h="datepicker_"+parseInt(Math.random()*1e3),i;b.id=h;a(this).data("datepickerId",b.id);var l=a(d.wrapper).attr("id",h).bind("click",k).data("datepicker",b);if(b.className){l.addClass(b.className)}var m="";for(var e=0;e<b.calendars;e++){i=b.starts;if(e>0){m+=d.space}m+=tmpl(d.head.join(""),{week:b.locale.weekMin,prev:b.prev,next:b.next,day1:b.locale.daysMin[i++%7],day2:b.locale.daysMin[i++%7],day3:b.locale.daysMin[i++%7],day4:b.locale.daysMin[i++%7],day5:b.locale.daysMin[i++%7],day6:b.locale.daysMin[i++%7],day7:b.locale.daysMin[i++%7]})}l.find("tr:first").append(m).find("table").addClass(c[b.view]);f(l.get(0));if(b.flat){l.appendTo(this).show().css("position","relative");j(l.get(0))}else{l.appendTo(document.body);a(this).bind(b.eventName,o)}}})},showPicker:function(){return this.each(function(){if(a(this).data("datepickerId")){o.apply(this)}})},hidePicker:function(){return this.each(function(){if(a(this).data("datepickerId")){a("#"+a(this).data("datepickerId")).hide()}})},setDate:function(b,c){return this.each(function(){if(a(this).data("datepickerId")){var d=a("#"+a(this).data("datepickerId"));var e=d.data("datepicker");e.date=b;if(e.date.constructor==String){e.date=g(e.date,e.format);e.date.setHours(0,0,0,0)}if(e.mode!="single"){if(e.date.constructor!=Array){e.date=[e.date.valueOf()];if(e.mode=="range"){e.date.push((new Date(e.date[0])).setHours(23,59,59,0).valueOf())}}else{for(var h=0;h<e.date.length;h++){e.date[h]=g(e.date[h],e.format).setHours(0,0,0,0).valueOf()}if(e.mode=="range"){e.date[1]=(new Date(e.date[1])).setHours(23,59,59,0).valueOf()}}}else{e.date=e.date.valueOf()}if(c){e.current=new Date(e.mode!="single"?e.date[0]:e.date)}f(d.get(0))}})},getDate:function(b){if(this.size()>0){return l(a("#"+a(this).data("datepickerId")).data("datepicker"))[b?0:1]}},clear:function(){return this.each(function(){if(a(this).data("datepickerId")){var b=a("#"+a(this).data("datepickerId"));var c=b.data("datepicker");if(c.mode!="single"){c.date=[];f(b.get(0))}}})},fixLayout:function(){return this.each(function(){if(a(this).data("datepickerId")){var b=a("#"+a(this).data("datepickerId"));var c=b.data("datepicker");if(c.flat){j(b.get(0))}}})}}}();a.fn.extend({DatePicker:b.init,DatePickerHide:b.hidePicker,DatePickerShow:b.showPicker,DatePickerSetDate:b.setDate,DatePickerGetDate:b.getDate,DatePickerClear:b.clear,DatePickerLayout:b.fixLayout})})(jQuery);(function(){var a={};this.tmpl=function b(c,d){var e=!/\W/.test(c)?a[c]=a[c]||b(document.getElementById(c).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return d?e(d):e}})()
